<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="../app/assets/javascripts/vendor/ace/ace.js"></script>

    <script type="text/javascript" src="../app/assets/javascripts/src/app.js"></script>
    <style type="text/css" media="screen">
        #hello {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0, 0, 41, 0.86);
        }
        .readonly-highlight{
            background-color: rgb(188, 25, 8) !important;
            position: absolute;
            z-index: 99999;
            border: 1px black solid;
        }
    </style>
</head>
<body>
<div id="hello">var Editor;
    (function (Editor) {
    var EditorManager = (function () {
    function EditorManager(divId, langId) {
    this._disabled_ranges = Array();
    this.div = $('#' + divId);
    this.ace = ace.edit(divId);
    this.ace.setTheme("ace/theme/monokai");
    this.ace.getSession().setMode("ace/mode/" + langId);
    this.ace.$blockScrolling = Infinity;
    }
    EditorManager.prototype.disableRange = function (sRow, sCol, eRow, eCol) {
    var _this = this;
    var session = this.ace.getSession(), Range = ace.require('ace/range').Range, range = new Range(sRow, sCol, eRow, eCol), markerId = session.addMarker(range, "readonly-highlight");
    this.ace.setOption("dragEnabled", false); //Required to disable cheat
    this.ace.keyBinding.addKeyboardHandler({
    handleKeyboard: function (data, hash, keyString, keyCode, event) {
    if (hash === -1 || (keyCode <= 40 && keyCode >= 37))
    return false;
    if (_this._intersects_ace_disabled(range)) {
    return { command: "null", passEvent: false };
    }
    }
    });
    this._before_ace_disabled(this.ace, 'onPaste', this._preventReadonly_ace_disabled.bind(this));
    this._before_ace_disabled(this.ace, 'onCut', this._preventReadonly_ace_disabled.bind(this));
    range.start = session.doc.createAnchor(range.start);
    range.end = session.doc.createAnchor(range.end);
    range.end.$insertRight = true;
    this._disabled_ranges.push(range);
    };
    EditorManager.prototype._before_ace_disabled = function (obj, method, wrapper) {
    var orig = obj[method];
    obj[method] = function () {
    var args = Array.prototype.slice.call(arguments);
    return wrapper.apply(this, function () {
    return orig.apply(obj, args);
    });
    };
    return obj[method];
    };
    EditorManager.prototype._intersects_ace_disabled = function (range) {
    return this.ace.getSelectionRange().intersects(range);
    };
    EditorManager.prototype._preventReadonly_ace_disabled = function (next) {
    if (this._disabled_ranges.length == 0)
    next();
    else {
    for (var i = 0; i < this._disabled_ranges.length; i++) {
    if (this._intersects_ace_disabled(this._disabled_ranges[i]))
    return;
    }
    next();
    }
    };
    return EditorManager;
    })();
    Editor.EditorManager = EditorManager;
    })(Editor || (Editor = {}));

    var ApkiOrg;
    (function (ApkiOrg_1) {
    var ApkiOrg = (function () {
    function ApkiOrg() {
    }
    ApkiOrg.prototype.initEditor = function (langId) {
    this.editor = new Editor.EditorManager('hello', langId);
    };
    ApkiOrg.prototype.getEditor = function () {
    return this.editor;
    };
    return ApkiOrg;
    })();
    ApkiOrg_1.ApkiOrg = ApkiOrg;
    })(ApkiOrg || (ApkiOrg = {}));
    jQuery(function () {
    apkiOrg = new ApkiOrg.ApkiOrg();
    });</div>
</body>
</html>